<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="for-Loops"><code>for</code> Loops<a class="anchor-link" href="#for-Loops">&#182;</a></h1><p>This lesson covers:</p>
<ul>
<li>for loops </li>
<li>Nested loops </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Problem:-Basic-For-Loops">Problem: Basic For Loops<a class="anchor-link" href="#Problem:-Basic-For-Loops">&#182;</a></h2><p>Construct a for loop to sum the numbers between 1 and N for any N. A for loop
that does nothing can be written:</p>
<div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Problem:-Compute-a-compound-return">Problem: Compute a compound return<a class="anchor-link" href="#Problem:-Compute-a-compound-return">&#182;</a></h2><p>The compound return on a bond that pays interest annually at rate r is given
by $cr_{t}=\prod_{i=1}^{T}(1+r)=(1+r)^{T}$. Use a for loop compute the total
return for Â£100 invested today for $1,2,\ldots,10$ years. Store this variable
in a 10 by 1 vector cr.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Problem:-Simulate-a-random-walk">Problem: Simulate a random walk<a class="anchor-link" href="#Problem:-Simulate-a-random-walk">&#182;</a></h2><p>(Pseudo) Normal random variables can be simulated using the command
<code>np.random.standard_normal(shape)</code> where <code>shape</code> is a tuple (or a scalar)
containing the dimensions of the desired random numbers. Simulate 100 normals
in a 100 by 1 vector and name the result <code>e</code>. Initialize a vector <code>p</code>
containing zeros using the function zeros. Add the 1st element of <code>e</code> to the
first element of <code>p</code>. Use a for loop to simulate a process
$y_{i}=y_{i-1}+e_{i}$. When finished plot the results using</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Problem:-Nested-Loops">Problem: Nested Loops<a class="anchor-link" href="#Problem:-Nested-Loops">&#182;</a></h2><p>Begin by loading momentum data used in an earlier lesson. Compute a
22-day moving-window standard deviation for each of the columns. Store
the value at the end of the window.</p>
<p>When finished, make sure that <code>std_dev</code> is a <code>DataFrame</code> and 
plot the annualized percentage standard deviations using:</p>
<div class="highlight"><pre><span></span><span class="n">ann_std_dev</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">252</span><span class="p">)</span> <span class="o">*</span> <span class="n">std_dev</span>
<span class="n">ann_std_dev</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Setup: Load the momentum data</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">momentum</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/momentum.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">momentum</span> <span class="o">=</span> <span class="n">momentum</span> <span class="o">/</span> <span class="mi">100</span>  <span class="c1"># Convert to numeric values from percentages</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Exercises">Exercises<a class="anchor-link" href="#Exercises">&#182;</a></h2><h3 id="Exercise">Exercise<a class="anchor-link" href="#Exercise">&#182;</a></h3><ol>
<li>Simulate a 1000 by 10 matrix consisting of 10 standard random walks using
both nested loops and <code>np.cumsum</code>. </li>
<li>Plot the results. </li>
</ol>
<p><strong>Question to think about</strong></p>
<p>If you rerun the code in this Exercise, do the results change? Why?</p>
<h3 id="Exercise:-Compute-Drawdowns">Exercise: Compute Drawdowns<a class="anchor-link" href="#Exercise:-Compute-Drawdowns">&#182;</a></h3><p>Using the momentum data, compute the maximum drawdown over all
22-day consecutive periods defined as the smallest cumulative 
produce of the gross return (1+r) for 1, 2, .., 22 days.</p>
<p>Finally, compute the mean drawdown for each of the portfolios.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
 

